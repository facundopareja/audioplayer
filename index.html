<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Single-Use Audio Buttons</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 40px; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
    #codeInput { padding: 8px 10px; font-size: 15px; }
  </style>
</head>
<body>
  <h2>🎧 Single-Use Audio Player</h2>

  <p>Enter your code to unlock playback:</p>
  <input type="password" id="codeInput" placeholder="Enter code">
  <button id="checkCode">Unlock</button>

  <div style="margin-top:30px;">
    <button id="btn1" disabled>Play Audio 1</button>
    <button id="btn2" disabled>Play Audio 2</button>
    <button id="btn3" disabled>Play Audio 3</button>
    <button id="btn4" disabled>Play Audio 4</button>
  </div>

  <!-- Hidden audio element -->
  <audio id="player" hidden></audio>

  <script>
    // --- CONFIGURATION ---
	const audioFiles = [
	  { url: "https://facundopareja.github.io/audioplayer/1.mp3" },
	  { url: "https://facundopareja.github.io/audioplayer/2.mp3" },
	  { url: "https://facundopareja.github.io/audioplayer/3.mp3" },
	  { url: "https://facundopareja.github.io/audioplayer/4.mp3" },
	];

    const validCodes = [
  "A7XQ9P2LDM",
  "H3UZV4N8KC",
  "T1JYB6F9RE",
  "M9DW3X5KLT",
  "P8NQ4J7SAH",
  "C2YV5L9TRX",
  "R7MZ1K8GQB",
  "E6JH4S9WPU",
  "L5AX2N8VQC",
  "F3KZ9R7DYM",
  "Q4VJ8H6TXS",
  "N2GZ7M9KLF",
  "J8TR5V4QWM",
  "K9YH2X6BPA",
  "V3QF7Z1LNR",
  "U5DJ8R4XKM",
  "S2H9L6VQGT",
  "B8KX3F7RZP",
  "G1QJ5T9VLD",
  "W4ZP8N6KJR",
  "R4KJ8P2VNM",
  "T9XQ3B6LZA",
  "F5HND8Y2WC",
  "G7MZ1Q4KPX",
  "V3CJL9T7EB",
  "N2YH8R5QWA",
  "S6KX3D9ZVF",
  "L1QJ7H4TRM",
  "B8PZ5N6GXC",
  "U4VY2M9KLD"
];

    let usedCodes = JSON.parse(localStorage.getItem("usedCodes") || "[]");

    const player = document.getElementById("player");
    const buttons = [
      document.getElementById("btn1"),
      document.getElementById("btn2"),
      document.getElementById("btn3"),
      document.getElementById("btn4")
    ];

    // --- UNLOCK BUTTON ---
    document.getElementById("checkCode").addEventListener("click", () => {
      const code = document.getElementById("codeInput").value.trim();

      if (usedCodes.includes(code)) {
        alert("❌ This code has already been used.");
        return;
      }

      if (validCodes.includes(code)) {
        alert("✅ Access granted! You can now play the audios.");
        buttons.forEach(btn => btn.disabled = false);

        usedCodes.push(code);
        localStorage.setItem("usedCodes", JSON.stringify(usedCodes));
      } else {
        alert("Invalid code.");
      }
    });

    // --- PLAYBACK LOGIC ---
    buttons.forEach((btn, index) => {
      btn.addEventListener("click", () => {
	// In button click:
	player.src = audioFiles[index].url;
	player.play();

        // Disable this button after audio ends
        player.onended = () => {
          btn.disabled = true;
          btn.textContent = "Played ✅";
        };
      });
    });
  </script>
</body>
</html>
